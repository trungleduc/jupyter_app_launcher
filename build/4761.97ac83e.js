"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[4761,7311],{7311:(e,t,n)=>{n.r(t),n.d(t,{LiteLicensesClient:()=>r,LitePluginListModel:()=>l,LiteTranslatorConnector:()=>u,THIRD_PARTY_LICENSES:()=>i});var a=n(94079),s=n(60649);const i="third-party-licenses.json",o=Object.freeze({packages:[]});class r extends a.Licenses.LicensesClient{async getBundles(){return{bundles:{...await this._getFederated(),[this.appName]:await this._getAppLicenses()}}}async download(e){const t=document.createElement("a");t.href=await this._getDownloadLink(e);const n="markdown"===e.format?"md":e.format;t.download=`jupyterlite-licenses.${n}`,document.body.appendChild(t),t.click(),document.body.removeChild(t)}get appName(){return s.PageConfig.getOption("appName")||"JupyterLite"}get appLicensesUrl(){return s.URLExt.join(s.PageConfig.getBaseUrl(),"build",i)}get labExtensionsUrl(){return s.PageConfig.getOption("fullLabextensionsUrl")}async _getDownloadLink(e){const t=await this.getBundles();let n,a;switch(e.format){case"json":default:n=JSON.stringify(t,null,2),a="application/json";break;case"markdown":n=this._formatAsMarkdown(t),a="text/markdown";break;case"csv":n=this._formatAsCSV(t),a="text/csv"}const s=new Blob([n],{type:a});return URL.createObjectURL(s)}_formatAsMarkdown(e){let t="# Third-Party Licenses\n\n";for(const[n,a]of Object.entries(e.bundles)){t+=`## ${n}\n\n`;for(const e of a.packages)t+=`### ${e.name}${e.versionInfo?` ${e.versionInfo}`:""}\n\n`,e.licenseId&&(t+=`**License ID:** ${e.licenseId}\n\n`),e.extractedText&&(t+=`\`\`\`\n${e.extractedText}\n\`\`\`\n\n`)}return t}_formatAsCSV(e){let t=`${["Bundle","Package","Version","License ID","License Text"].join(",")}\n`;for(const[n,a]of Object.entries(e.bundles))for(const e of a.packages)t+=`${[this._escapeCSVField(n),this._escapeCSVField(e.name),this._escapeCSVField(e.versionInfo||""),this._escapeCSVField(e.licenseId||""),this._escapeCSVField(e.extractedText||"")].join(",")}\n`;return t}_escapeCSVField(e){return e&&(e.includes(",")||e.includes('"')||e.includes("\n"))?`"${e.replace(/"/g,'""')}"`:e}async _getAppLicenses(){let e=o;try{e=(await fetch(this.appLicensesUrl)).json()}catch(e){console.warn("Could not resolve licenses for",this.appName)}return e}async _getFederated(){const e={};let t;try{t=JSON.parse(s.PageConfig.getOption("federated_extensions"))}catch{return e}const n=[];for(const a of t)n.push(this._getOneFederated(a,e));try{await Promise.all(n)}catch(e){console.warn("Error resolving licenses",e)}return e}async _getOneFederated(e,t){try{const n=s.URLExt.join(this.labExtensionsUrl,e.name,"static",i),a=await fetch(n);t[e.name]=await a.json()}catch{console.warn("Could not resolve licenses for",e),t[e.name]=o}}}var c=n(68310);class l extends c.PluginListModel{constructor(e){super(e),this._availablePlugins=e.pluginData.availablePlugins.map((e=>{let t=e.provides?e.provides.name.split(":")[1]:void 0;return e.provides&&!t&&(t=e.provides.name),{...e,tokenLabel:t,locked:!0,enabled:!0}}))}get available(){return this._availablePlugins}async refresh(){}async enable(e){}async disable(e){}}var d=n(70870);const p="all";class u extends d.DataConnector{constructor(){super(...arguments),this._prevLocale=""}async fetch(e){var t;const n=null!==(t=null==e?void 0:e.language)&&void 0!==t?t:"";let a=n;"default"===n?a="en":""===n&&(a=p);const i=s.URLExt.join(s.PageConfig.getBaseUrl(),`api/translations/${a}.json`);try{const e=await fetch(i),t=JSON.parse(await e.text());if(this._prevLocale!==p&&a===p){const e=this._prevLocale;t.data[e].displayName=t.data[e].nativeName,"en"!==e&&(t.data.en.displayName=`${t.data.en.nativeName} (default)`)}return this._prevLocale=a,t}catch(e){return a?{data:{},message:`Language pack '${a}' not installed!`}:{data:{en:{displayName:"English",nativeName:"English"}},message:""}}}}}}]);
//# sourceMappingURL=4761.97ac83e.js.map